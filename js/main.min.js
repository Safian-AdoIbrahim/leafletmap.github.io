function adjustLayerbyZoom(e){if(e>11){if(!GINAdmin2){map.addLayer(guineaAdminLayer2);for(var a=0;a<GINLabels.length;a++)GINLabels[a].addTo(map);GINAdmin2=!0}}else{map.removeLayer(guineaAdminLayer2);for(var a=0;a<GINLabels.length;a++)map.removeLayer(GINLabels[a]);GINAdmin2=!1}}function triggerUiUpdate(){societe=$("#societe_scope").val(),region=$("#state_scope").val(),prefecture=$("#lga_scope").val(),substance=$("#substance_type").val(),console.log("All Seleceted: ",societe+"  "+region+"  "+prefecture+"  "+substance+"  "+date);var e=buildQuery(region,prefecture,sub_prefecture,date);getData(e),prefecture_select=$("#state_scope").val()}function buildQuery(e,a,o){var t=!1;return query="https://femtope.cartodb.com/api/v2/sql?format=GeoJSON&q=SELECT * FROM mine_guinea",console.log("Date in Query: ",date),a.length>0||o.length>0||societe.length>0||substance.length>0?(query=query.concat(" WHERE"),a.length>0&&(query=query.concat(" region = '".concat(a.concat("'"))),t=!0),o.length>0&&(query=query.concat(t?" AND prefecture = '".concat(o.concat("'")):" prefecture = '".concat(o.concat("'"))),t=!0),societe.length>0&&(query=query.concat(t?" AND societe = '".concat(societe.concat("'")):" societe = '".concat(societe.concat("'"))),t=!0),substance.length>0&&(query=query.concat(t?" AND substance = '".concat(substance.concat("'")):" substance = '".concat(substance.concat("'"))),t=!0)):query="https://femtope.cartodb.com/api/v2/sql?format=GeoJSON&q=SELECT * FROM mine_guinea",query}function addDataToMap(e){null!=dataLayer&&map.removeLayer(dataLayer),null!=markerGroup&&map.removeLayer(markerGroup);var a=L.icon({iconUrl:"image/dolerite.jpg",iconSize:[20,20],iconAnchor:[25,25]});$("#projectCount").text(e.features.length),markerGroup=L.markerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!0,removeOutsideVisibleBounds:!0}),dataLayer=L.geoJson(e,{pointToLayer:function(e,o){var t=L.marker(o,{icon:a});return t},onEachFeature:function(e,a){e.properties&&e.properties.cartodb_id&&a.on("click",function(){displayInfo(e)})}}),markerGroup.addLayer(dataLayer),map.fitBounds(dataLayer),map.addLayer(markerGroup)}function addAdminLayersToMap(e){var a={admin0:{clickable:!0,color:"#B81609",fillColor:"#ffffff",weight:2,opacity:1,fillOpacity:.05},admin2:{clickable:!0,color:"#412406",fillColor:"#80FFFFFF",weight:1.5,opacity:.5,fillOpacity:.05},region:{clickable:!0,color:"#e2095c",fillColor:"#80FFFFFF",weight:2,opacity:.7,fillOpacity:.05},prefecture:{clickable:!0,color:"#e2095c",fillColor:"#80FFFFFF",weight:2.5,opacity:.7,fillOpacity:.05},sub_prefecture:{clickable:!0,color:"#ff0000",fillColor:"#80FFFFFF",weight:2.5,opacity:.7,fillOpacity:.05}};regionSelect=$("#state_scope").val(),prefectureSelect=$("#lga_scope").val(),guineaAdminLayer0=L.geoJson(e.guineaAdmin0,{style:a.admin0}).addTo(map),guineaAdminLayer2=L.geoJson(e.guineaAdmin2,{style:a.region,onEachFeature:function(e,a){var o=L.divIcon({className:"labelLga-icon",html:e.properties.NAME_2});GINLabels.push(L.marker(a.getBounds().getCenter(),{icon:o}))}}),null!=region_layer&&map.removeLayer(region_layer),region_layer=L.geoJson(e.guineaAdmin1,{filter:function(e){return e.properties.NAME_1===regionSelect},style:a.region}).addTo(map),map.fitBounds(region_layer),null!=prefecture_layer&&map.removeLayer(prefecture_layer),prefecture_layer=L.geoJson(e.guineaAdmin2,{filter:function(e){return e.properties.NAME_2===prefectureSelect},style:a.region}).addTo(map),map.fitBounds(prefecture_layer),console.log("Zoom Level ",map.getZoom())}function displayInfo(e){var a=buildPopupContent(e);$("#infoContent").html(a)}function normalizeName(e){return e=e.replace("_"," ").replace("of_"," of "),e=e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function buildPopupContent(e){for(var a="",o=["date","region","prefecture","sous_prefecture","prenoms_et_nom","fonction","societe","prenom_directeur","prenom_nom_directeur","sexe_directeur","adresse_email","numero_telephone"],t=0;t<o.length;t++)a=a.concat("<p><strong>"+normalizeName(o[t])+": </strong>"+e.properties[o[t]]+"</p>");return a}function showLoader(){$(".fa-spinner").addClass("fa-spin"),$(".fa-spinner").show()}function hideLoader(){$(".fa-spinner").removeClass("fa-spin"),$(".fa-spinner").hide()}function getData(e){showLoader(),$.post(e,function(e){hideLoader(),addDataToMap(e),console.log("Data-Geo::  ",e)}).fail(function(){console.log("error!")})}function getAdminLayers(){var e={};$.get("resources/GIN_Admin0.json",function(a){e.guineaAdmin0=a,addAdminLayersToMap(e)}).fail(function(){logError(null)}),$.get("resources/GIN_Admin1.json",function(a){e.guineaAdmin1=a,addAdminLayersToMap(e)}).fail(function(){logError(null)}),$.get("resources/GIN_Admin2.json",function(a){e.guineaAdmin2=a,addAdminLayersToMap(e)}).fail(function(){logError(null)})}function logError(){console.log("error!")}function changecat(e){if(0==e.length)document.getElementById("lga_scope").innerHTML="<option></option>";else{var a="";for(categoryId in lgasbystate[e])a+="<option>"+lgasbystate[e][categoryId]+"</option>";document.getElementById("lga_scope").innerHTML=a}}var d,m,y,date,type="",distance,twokm,threekm,fourkm,region="",prefecture="",prefecture_select="",sub_prefecture="",geoData=null,dataLayer=null,markerGroup=null,guineaAdminLayer0,guineaAdminLayer1,guineaAdminLayer2,region_layer=null,prefecture_layer=null,sub_prefecture_layer=null,bufferLayer=null,substance_layer=null,GINLabels=[],within,within_fc,buffered=null,GINAdmin2=!1,googleSat=L.tileLayer("https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),googleStreets=L.tileLayer("https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]}),osm=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18}),mapbox=L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoicy1jaGFuZCIsImEiOiJjaXdmcmtnc2QwMDBhMnltczBldmc1MHZuIn0.eIdXZvG0VOOcZhhoHpUQYA"),map=L.map("map",{center:[9.6,-12.6],zoom:7,animation:!0,zoomControl:!1,layers:[osm]});map.options.minZoom=7;var baseMaps={"Google Satelite":googleSat,OSM:osm,"Google Street":googleStreets,"Map Box":mapbox};map.on("zoomend",function(){adjustLayerbyZoom(map.getZoom())}),new L.Control.Zoom({position:"topright"}).addTo(map),L.control.layers(baseMaps).addTo(map),L.control.scale({position:"bottomright",maxWidth:100,metric:!0,updateWhenIdle:!0}).addTo(map),getAdminLayers(),hideLoader();var lgasbystate={Abuja:[" ","Gwagwalada","Kuje","Abaji","Abuja Municipal","Bwari","Kwali"],Abia:[" ","Aba North","Aba South","Arochukwu","Bende","Ikwuano","Isiala-Ngwa North","Isiala-Ngwa South","Isuikwato","Obi Nwa","Ohafia","Osisioma","Ngwa","Ugwunagbo","Ukwa East","Ukwa West","Umuahia North","Umuahia South","Umu-Neochi"],Adamawa:[" ","Demsa","Fufore","Ganaye","Gireri","Gombi","Guyuk","Hong","Jada","Lamurde","Madagali","Maiha","Mayo-Belwa","Michika","Mubi North","Mubi South","Numan","Shelleng","Song","Toungo","Yola North","Yola South"],AkwaIbom:[" ","Abak","Eastern Obolo","Eket","Esit Eket","Essien Udim","Etim Ekpo","Etinan","Ibeno","Ibesikpo Asutan","Ibiono Ibom","Ika","Ikono","Ikot Abasi","Ikot Ekpene","Ini","Itu","Mbo","Mkpat Enin","Nsit Atai","Nsit Ibom","Nsit Ubium","Obot Akara","Okobo","Onna","Oron","Oruk Anam","Udung Uko","Ukanafun","Uruan","Urue-Offong/Oruko","Uyo"],Anambra:[" ","Aguata","Anambra East","Anambra West","Anaocha","Awka North","Awka South","Ayamelum","Dunukofia","Ekwusigo","Idemili North","Idemili south","Ihiala","Njikoka","Nnewi North","Nnewi South","Ogbaru","Onitsha North","Onitsha South","Orumba North","Orumba South","Oyi"],Bauchi:[" ","Alkaleri","Bauchi","Bogoro","Damban","Darazo","Dass","Ganjuwa","Giade","Itas/Gadau","Jama'are","Katagum","Kirfi","Misau","Ningi","Shira","Tafawa-Balewa","Toro","Warji","Zaki"],Bayelsa:[" ","Brass","Ekeremor","Kolokuma/Opokuma","Nembe","Ogbia","Sagbama","Southern Jaw","Yenegoa"],Benue:[" ","Ado","Agatu","Apa","Buruku","Gboko","Guma","Gwer East","Gwer West","Katsina-Ala","Konshisha","Kwande","Logo","Makurdi","Obi","Ogbadibo","Oju","Okpokwu","Ohimini","Oturkpo","Tarka","Ukum","Ushongo","Vandeikya"],Borno:[" ","Abadam","Askira/Uba","Bama","Bayo","Biu","Chibok","Damboa","Dikwa","Gubio","Guzamala","Gwoza","Hawul","Jere","Kaga","Kala/Balge","Konduga","Kukawa","KwayaKusar","Mafa","Magumeri","Maiduguri","Marte","Mobbar","Monguno","Ngala","Nganzai","Shani"],CrossRiver:[" ","Akpabuyo","Odukpani","Akamkpa","Biase","Abi","Ikom","Yarkur","Odubra","Boki","Ogoja","Yala","Obanliku","Obudu","Calabar South","Etung","Bekwara","Bakassi","Calabar Municipality"],Delta:[" ","Oshimili ","Aniocha","Aniocha South","Ika South","Ika North-East","Ndokwa West","Ndokwa East","Isoko south","Isoko North","Bomadi","Burutu","Ughelli South","Ughelli North","Ethiope West","Ethiope East","Sapele","Okpe","Warri North","Warri South","Uvwie","Udu","Warri Central","Ukwani","Oshimili North","Patani"],Ebonyi:[" ","Afikpo South","Afikpo North","Onicha","Ohaozara","Abakaliki","Ishielu","lkwo","Ezza","Ezza South","Ohaukwu","Ebonyi","Ivo"],Edo:[" ","Esan North-East","Esan Central","Esan West","Egor","Ukpoba","Central","Etsako Central","Igueben","Oredo","Ovia SouthWest","Ovia South-East","Orhionwon","Uhunmwonde","Etsako East","Esan South-East"],Ekiti:[" ","Ado","Ekiti-East","Ekiti-West","Emure/Ise/Orun","Ekiti South-West","Ikare","Irepodun","Ijero","Ido/Osi","Oye","Ikole","Moba","Gbonyin","Efon","Ise/Orun","Ilejemeje"],Enugu:[" ","Enugu South","Igbo-Eze South","Enugu North","Nkanu","Udi Agwu","Oji-River","Ezeagu","IgboEze North","Isi-Uzo","Nsukka","Igbo-Ekiti","Uzo-Uwani","Enugu East","Aninri","Nkanu East","Udenu"],Gombe:[" ","Akko","Balanga","Billiri","Dukku","Kaltungo","Kwami","Shomgom","Funakaye","Gombe","Nafada/Bajoga","Yamaltu/Delta"],Imo:[" ","Aboh-Mbaise","Ahiazu-Mbaise","Ehime-Mbano","Ezinihitte","Ideato North","Ideato South","Ihitte/Uboma","Ikeduru","Isiala Mbano","Isu","Mbaitoli","Ngor-Okpala","Njaba","Nwangele","Nkwerre","Obowo","Oguta","Ohaji/Egbema","Okigwe","Orlu","Orsu","Oru East","Oru West","Owerri-Municipal","Owerri North","Owerri West"],Jigawa:[" ","Auyo","Babura","Birni Kudu","Biriniwa","Buji","Dutse","Gagarawa","Garki","Gumel","Guri","Gwaram","Gwiwa","Hadejia","Jahun","Kafin Hausa","Kaugama Kazaure","Kiri Kasamma","Kiyawa","Maigatari","Malam Madori","Miga","Ringim","Roni","Sule-Tankarkar","Taura","Yankwashi"],Kaduna:[" ","Birni-Gwari","Chikun","Giwa","Igabi","Ikara","Jaba","Jema'a","Kachia","Kaduna North","Kaduna South","Kagarko","Kajuru","Kaura","Kauru","Kubau","Kudan","Lere","Makarfi","Sabon-Gari","Sanga","Soba","Zango-Kataf","Zaria"],Kano:[],Katsina:[],Kebbi:[],Kogi:[],Kwara:[],Lagos:[],Nassarawa:[],Niger:[],Ogun:[],Ondo:[],Osun:[],Oyo:[],Plateau:[],Rivers:[],Sokoto:[],Taraba:[],Yobe:[],Zamfara:[]};
//# sourceMappingURL=main.min.js.map
